<form class="form-horizontal"
      role="form">
<div class="row">
    <div class="col-xs-6">
        <p>
    <strong>Please clarify:</strong><br/>
    This invoice needs clarification and could not be approved due to missing data.
  </p>

  <div class="form-group">
    <label class="control-label col-md-2">Invoice Document</label>
    <div class="form-control-static col-md-10">
      <a cam-file-download="invoiceDocument"></a>
    </div>
  </div>

  <div class="form-group">
    <label class="control-label col-md-2">Creditor</label>
    <div class="col-md-10">
      <input cam-variable-name="creditor"
             type="text"
             name="creditor"
             class="form-control" />
    </div>
  </div>

  <div class="form-group">
    <label class="control-label col-md-2">Amount</label>
    <div class="col-md-10">
      <input cam-variable-name="amount"
             type="text"
             name="amount"
             class="form-control" />
    </div>
  </div>

  <div class="form-group">
    <label class="control-label col-md-2">Invoice Category</label>
    <div class="col-md-10">
      <select cam-variable-name="invoiceCategory"
              class="form-control">
        <option>Travel Expenses</option>
        <option>Misc</option>
      </select>
    </div>
  </div>

  <div class="form-group">
    <label class="control-label col-md-2">Invoice Number</label>
    <div class="col-md-10">
      <input cam-variable-name="invoiceNumber"
             type="text"
             name="invoiceNumber"
             class="form-control" />
    </div>
  </div>

  <div class="form-group">
    <div class="col-md-10 col-md-offset-2">
      <div class="checkbox">
        <label>
          <input cam-variable-name="clarified"
                 cam-variable-type="Boolean"
                 type="checkbox"
                 name="clarified"
                 class="form-control" />
          Could you clarify the invoice?
        </label>
      </div>
    </div>
  </div>
    </div>
    <div class="col-xs-6">
        <strong>Available tasks</strong>
        <ul>
            <li ng-repeat="availableTask in availableTasks">{{availableTask.activityName}} <a href="" ng-click="activateCaseInstance(availableTask.id)">Activate</a></li>
        </ul>
        <strong>Active Tasks</strong>
        <ul>
            <li ng-repeat="activeTask in activeTasks">{{activeTask.activityName}}</li>
        </ul>
        <strong>Completed Tasks</strong>
        <ul>
            <li ng-repeat="completedTask in completedTasks">{{completedTask.activityName}}</li>
        </ul>
    </div>
</div>
   
  <script cam-script type="text/form-script">
    inject(['$http', 'Uri', function($http, Uri) {
        debugger;
        var taskId = camForm.taskId;
        $scope.activateCaseInstance = function(caseExecutionId) {
             $http.post(Uri.appUri("engine://engine/:engine/case-execution/"+caseExecutionId+"/manual-start"),{});
        };
        camForm.on('form-loaded', function() {
        $http.get(Uri.appUri("engine://engine/:engine/task/"+taskId)).success(function(result){
          $http.get(Uri.appUri("engine://engine/:engine/case-execution/"),{params:{"caseInstanceId":result.caseInstanceId,"enabled":true}}).success(function(result){
             $scope.availableTasks = result;
            });
            $http.get(Uri.appUri("engine://engine/:engine/case-execution/"),{params:{"caseInstanceId":result.caseInstanceId,"active":true}}).success(function(result){
                $scope.activeTasks = result;
            });
            $http.get(Uri.appUri("engine://engine/:engine/case-execution/"),{params:{"caseInstanceId":result.caseInstanceId,"disabled":true}}).success(function(result){
             $scope.completedTasks = result;
            });
        });
        
      });
    }]);
//Get enabled case executions 
//http://localhost:8080/camunda/api/engine/engine/default/case-execution/?caseInstanceId=898a5fd4-979f-11e6-81a3-8c899f49595d&enabled=true
    camForm.on('submit', function(evt) {
      
    });
  </script>
  
</form>

