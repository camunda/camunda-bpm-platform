<?xml version="1.0" encoding="UTF-8"?>
<ejb-jar xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
	http://java.sun.com/xml/ns/javaee/ejb-jar_3_1.xsd"
	version="3.1">
	<module-name>process-engine</module-name>
	<display-name>process-engine</display-name>

	<enterprise-beans>
		<session>
			<ejb-name>ProcessEngineService</ejb-name>
			<concurrency-management-type>Bean</concurrency-management-type>
			<transaction-type>Bean</transaction-type>
			<env-entry>
				<description>
					The jndi-name of the datasource used by the process engine.
				</description>
				<env-entry-name>datasourceJndiName</env-entry-name>
				<env-entry-type>java.lang.String</env-entry-type>
				<env-entry-value>datasource/foxEngine</env-entry-value>
				<injection-target>
					<injection-target-class>com.camunda.fox.platform.impl.ProcessEngineServiceBean</injection-target-class>
					<injection-target-name>datasourceJndiName</injection-target-name>
				</injection-target>
			</env-entry>
			<env-entry>
				<description>
					If true, fox platform automatically performs database schema updates on startup.
				</description>
				<env-entry-name>autoUpdateSchema</env-entry-name>
				<env-entry-type>java.lang.Boolean</env-entry-type>
				<env-entry-value>true</env-entry-value>
				<injection-target>
					<injection-target-class>com.camunda.fox.platform.impl.ProcessEngineServiceBean</injection-target-class>
					<injection-target-name>autoUpdateSchema</injection-target-name>
				</injection-target>
			</env-entry>	
			<env-entry>
				<description>
					Controls the way historic (completed) process instances are handled. Possible values: [none|activity|audit|full]
				</description>
				<env-entry-name>history</env-entry-name>
				<env-entry-type>java.lang.String</env-entry-type>
				<env-entry-value>audit</env-entry-value>
				<injection-target>
					<injection-target-class>com.camunda.fox.platform.impl.ProcessEngineServiceBean</injection-target-class>
					<injection-target-name>history</injection-target-name>
				</injection-target>
			</env-entry>
			
			<!-- Job Executor -->
			<env-entry>
				<description>
					If true, the job executor is automatically activated.
				</description>
				<env-entry-name>activateJobExecutor</env-entry-name>
				<env-entry-type>java.lang.Boolean</env-entry-type>
				<env-entry-value>true</env-entry-value>
				<injection-target>
					<injection-target-class>com.camunda.fox.platform.impl.ProcessEngineServiceBean</injection-target-class>
					<injection-target-name>activateJobExecutor</injection-target-name>
				</injection-target>
			</env-entry>
			<env-entry>
				<description>
					The amount of milliseconds a job is locked after failure.
				</description>
				<env-entry-name>jobExecutor_lockTimeInMillis</env-entry-name>
				<env-entry-type>java.lang.Integer</env-entry-type>
				<env-entry-value>300000</env-entry-value>
				<injection-target>
					<injection-target-class>com.camunda.fox.platform.impl.ProcessEngineServiceBean</injection-target-class>
					<injection-target-name>jobExecutor_lockTimeInMillis</injection-target-name>
				</injection-target>
			</env-entry>
			<env-entry>
				<description>
					The polling interval of the job executor.
				</description>
				<env-entry-name>jobExecutor_waitTimeInMillis</env-entry-name>
				<env-entry-type>java.lang.Integer</env-entry-type>
				<env-entry-value>5000</env-entry-value>
				<injection-target>
					<injection-target-class>com.camunda.fox.platform.impl.ProcessEngineServiceBean</injection-target-class>
					<injection-target-name>jobExecutor_waitTimeInMillis</injection-target-name>
				</injection-target>
			</env-entry>
			<env-entry>
				<description>
					The maximum number of jobs acquired in a single acquisition.
				</description>
				<env-entry-name>jobExecutor_maxJobsPerAcquisition</env-entry-name>
				<env-entry-type>java.lang.Integer</env-entry-type>
				<env-entry-value>3</env-entry-value>
				<injection-target>
					<injection-target-class>com.camunda.fox.platform.impl.ProcessEngineServiceBean</injection-target-class>
					<injection-target-name>jobExecutor_maxJobsPerAcquisition</injection-target-name>
				</injection-target>
			</env-entry>
			
            <!-- We have to reference the resource to make it available in the local context of the bean. -->
			<resource-ref>
				<res-ref-name>wm/default</res-ref-name>
				<res-type>commonj.work.WorkManager</res-type>
				<res-auth>Container</res-auth>
				<res-sharing-scope>Shareable</res-sharing-scope>
			</resource-ref>
		</session>
	</enterprise-beans>

</ejb-jar>