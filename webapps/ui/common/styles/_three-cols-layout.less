.side-stroke(
  @hover-color: @link-hover-color;
  @active-color: @navbar-default-link-active-bg;
  @inactive-color: @gray-lighter;
  @padding: @grid-gutter-width * 0.5;
) {
  padding-left: (@padding - 5px);
  padding-right: (@padding - 5px);
  margin-left: 5px;
  margin-right: 2px;
  border: 3px solid @inactive-color;
  border-width: 0 3px 0 0;
  transition: border-color 0.218s linear;

  &.active,
  &.active:hover {
    border-color: @active-color;
  }

  &:hover {
    border-color: @hover-color;
  }
}

.column-list-item-colors(
  @base-color: lighten(@gray-light, 5%);
  @active-color: @text-color;
  @active-link-color: @link-color;
  @active-link-hover-color: @link-hover-color;
) {
  color: @base-color;
  transition: color 0.218s ease;
  a {
    color: @base-color;
    transition: color 0.218s ease;
  }

  &.active,
  &:hover,
  &:focus {
    color: @active-color;
    a {
      color: @active-link-color;
      &:hover,
      &:focus {
        color: @active-link-hover-color;
      }
    }
  }
}

.column-list-item() {
  display: block;
  padding-top: @padding-base-vertical;
  padding-bottom: @padding-base-vertical;
  margin-bottom: @padding-base-vertical;
  position: relative;

  h4 {
    word-wrap: break-word;
  }

  .side-stroke();

  .column-list-item-colors();
}



.first-column-list() {
  list-style: none;
  overflow: visible;
  padding: 0;
  margin: 0;

  &:focus {
    outline: none;
  }
}

.first-column-list-item() {
  padding-top: (@padding-base-vertical * 2);
  padding-bottom: (@padding-base-vertical * 2);

  .actions {
    display: none;
    font-size: smaller;
    position: absolute;
    top: 2px;
    right: 6px;
    background-color: fade(@gray-lighter, 0.5);
    a {
      margin-left: 0.5em;
    }
  }

  h4 {
    font-size: 16px;
  }

  &:last-child {
    margin-bottom: 0;
  }

  &:hover {
    .actions {
      display: block;
    }
  }
}



.second-column-list() {
  &:focus,
  ul:focus,
  ol:focus {
    outline: none;
  }
}

.second-column-list-item() {
  &:hover {
  }

  &.active {
  }
}


.three-cols-layout-base() {
  // S- (vertical layout)
  .columns,
  .column {
    position: relative;
    height: auto;
    min-height: 0;
    max-height: none;
    max-width: 100%;
    margin-left: 0;
    margin-right: 0;
    overflow: auto;
    overflow-x: visible;
  }

  .column .cell.content {
    padding-top: @grid-gutter-width * 0.5;
  }

  .column-right .cell.content {
    padding: (@grid-gutter-width * 0.5);
  }

  .column-left,
  .column-center {
    .well {
      margin: 0 (@grid-gutter-width * 0.5) (@grid-gutter-width * 0.5) (@grid-gutter-width * 0.5);
    }
  }
}


.three-cols-layout-handheld() {
  .site-wrap {
    .abs-box(0, 0, 0, 0);
    z-index: 2;

    > .navbar {
      z-index: 2;
    }
  }

  .page-wrap,
  .columns,
  .column {
    .abs-box();
  }

  .page-wrap {
    z-index: 1;
    top: @navbar-height;
    bottom: @footer-height;
  }

  .columns {
    overflow: hidden;

    > .column {
      transition: left @layout-transition-duration @layout-transition-timing,
                  right @layout-transition-duration @layout-transition-timing,
                  margin-left @layout-transition-duration @layout-transition-timing,
                  margin-right @layout-transition-duration @layout-transition-timing;
    }

    .cell {
      position: relative;
      z-index: 1;
      position: absolute;
      top: (@column-top-height + (@padding-base-vertical * 2));
      bottom: 0;
      left: 0;
      right: 0;


      &.content {
        transition: opacity @layout-transition-duration @layout-transition-timing;

        overflow-x: hidden;
        overflow-y: auto;
      }

      &.top {
        z-index: 2;
        top: 0;
        bottom: auto;
        overflow: visible;
        margin: 0;

        > *:last-child {
          float: right;
        }
      }
    }

    button.maximize,
    button.region-toggle {
      display: inline-block;
    }

    button.reset-regions {
      display: none;
    }
  }
}


.three-cols-layout(@left-width: 200px, @center-width: 300px) {
  .three-cols-layout {
    height: ~"calc(100vh - (@{header-height} + @{footer-height}))";
    width: 100vw;
    overflow: hidden;
  }

  .columns {
    .column-left {
      z-index: 3;
      width: @left-width;
    }

    .column-center {
      z-index: 2;
      left: @left-width;
      right: 100%;
      margin-right: (0 - (@left-width + @center-width + (@grid-gutter-width * 0)));
    }

    .column-right {
      z-index: 1;
      left: (@left-width + @center-width);
      margin-left: 0;
    }
  }
}

.three-cols-layout-states(@left-width: 200px, @center-width: 300px) {
  .filters-column-close {
    .column.task-filters {
      left: (0 - (@left-width - @grid-gutter-width));
    }

    .column.tasks-list {
      left: @grid-gutter-width;
      margin-right: (0 - (@center-width + (@grid-gutter-width * 1)));
    }

    .column.task-details {
      left: (@center-width + @grid-gutter-width);
    }

    &.task-column-close {
      .column.tasks-list {
        right: 30px;
        margin: 0;
      }
    }

    &.list-column-close {
      .column.tasks-list {
        left: (0 - (@center-width - (@grid-gutter-width * 2)));
        right: 100%;
        margin-right: (0 - (@grid-gutter-width * 2));
      }

      .column.task-details {
        left: @grid-gutter-width * 2;
      }
    }
  }


  .list-column-close {
    .column.tasks-list {
      left: 0;
      right: 100%;
      margin-right: (0 - (@left-width + (@grid-gutter-width * 1)));
    }

    .column.task-details {
      left: (@left-width + @grid-gutter-width);
    }
  }


  .task-column-close {
    .column.tasks-list {
      right: @grid-gutter-width;
      margin: 0;
    }

    .column.task-details {
      right: (0 - (@center-width - @grid-gutter-width));
      left: 100%;
      margin-left: (0 - @grid-gutter-width);
    }
  }
}


.three-cols-layout-colors(@left, @center, @right) {
  .columns {
    color: @gray;

    .active,
    .clickable:hover,
    .clickable:focus {
      color: @gray-darker;
    }

    > .column {
      border-right: 1px solid mix(@gray-light, @gray-lighter);
      background-color: @body-bg;

      .cell.top {
        border-bottom: 1px solid @gray-lighter;
        background-color: @custom-gray-lighter;
      }
    }

    > .column-right {
      color: @gray-darker;
      border-right: none;
    }
  }

  .cell.top {
    > a,
    > button,
    > .btn-link,
    .task-actions view > a,
    .sorting-choice > li > a,
    [cam-deployments-sorting-choices] > .dropdown > a {
      color: @navbar-default-link-color;
      &:hover,
      &:focus {
        text-decoration: none;
        color: @navbar-default-link-hover-color;
      }

      &:focus {
        outline: thin dotted;
        outline: 5px auto -webkit-focus-ring-color;
        outline-offset: -2px;
      }
    }

    > button {
      .icon-bar {
        background-color: @navbar-default-link-color;
      }
      &:hover,
      &:focus {
        .icon-bar {
          background-color: @navbar-default-link-hover-color;
        }
      }
    }
  }
}


.three-cols-layout-header() {
  .cell.top {
    min-height: (@column-top-height + (@padding-base-vertical * 2) + @border-thin-width);
    padding: @padding-base-vertical (@grid-gutter-width * 0.5);
    margin: (0 - (@grid-gutter-width * 0.5))
            (0 - (@grid-gutter-width * 0.5))
            (@grid-gutter-width * 0.5)
            (0 - (@grid-gutter-width * 0.5));


    > button,
    > div {
      float: left;
      vertical-align: middle;
      margin-top: 0;
      margin-bottom: 0;
      padding: 0;
      height: @column-top-height;
      line-height: @column-top-height;
    }
  }
}
